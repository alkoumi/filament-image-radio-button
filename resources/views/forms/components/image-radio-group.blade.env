<x-dynamic-component
    :component="$getFieldWrapperView()"
    :id="$getId()"
    :label="$getLabel()"
    :label-sr-only="$isLabelHidden()"
    :helper-text="$getHelperText()"
    :hint="$getHint()"
    :hint-icon="$getHintIcon()"
    :required="$isRequired()"
    :state-path="$getStatePath()"
>


    <div {{ $attributes->merge(['class' => 'flex space-x-4']) }}>
        @foreach($getOptions() as $value => $image)
            <label class="cursor-pointer">
                <input type="radio" name="{{ $value }}" value="{{ $value }}" class="hidden peer">
                <div class="border-2 border-transparent peer-checked:border-blue-500 rounded-lg overflow-hidden">
                    <img src="{{ asset($getDisk()->url('') . $image) }}" alt="Option {{ $value }}" class="w-24 h-24 object-cover">
                </div>
            </label>
        @endforeach
    </div>



{{--    <div--}}
{{--        x-data="{--}}
{{--            state: $wire.{{ $getStatePath() }}--}}
{{--        }"--}}
{{--        class="filament-forms-image-radio-component"--}}
{{--    >--}}
{{--        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">--}}
{{--            @foreach ($getOptions() as $value => $image)--}}
{{--                <div--}}
{{--                    wire:click="$set('{{ $getStatePath() }}', '{{ $value }}')"--}}
{{--                    class="image-radio-option--}}
{{--                        cursor-pointer--}}
{{--                        rounded-lg--}}
{{--                        overflow-hidden--}}
{{--                        border-2--}}
{{--                        transition-all--}}
{{--                        duration-300--}}
{{--                        ease-in-out--}}
{{--                        hover:shadow-lg--}}
{{--                        {{ $hasAnimation() ? 'transform hover:-translate-y-1' : '' }}"--}}
{{--                    x-bind:class="{--}}
{{--                        'border-primary-500 ring-2 ring-primary-500 shadow-lg': state === '{{ $value }}',--}}
{{--                        'border-gray-200 hover:border-gray-300': state !== '{{ $value }}'--}}
{{--                    }"--}}
{{--                >--}}
{{--                    <div class="relative w-full h-full">--}}
{{--                        <img--}}
{{--                            src="{{ asset($getDisk()->url('') . $image) }}"--}}
{{--                            alt="Option {{ $value }}"--}}
{{--                            class="--}}
{{--                                w-full--}}
{{--                                h-full--}}
{{--                                object-cover--}}
{{--                                object-center--}}
{{--                                transition-all--}}
{{--                                duration-300--}}
{{--                            "--}}
{{--                            onerror="this.onerror=null; this.src='{{ asset('images/placeholder.png') }}'; console.error('Image failed to load:', '{{ asset($getDisk()->url('') . $image) }}')"--}}
{{--                            style="aspect-ratio: {{ $getImageWidth() }}/{{ $getImageHeight() }};"--}}
{{--                        />--}}

{{--                        <div--}}
{{--                            class="absolute inset-0 bg-primary-500 bg-opacity-0 transition-all duration-300"--}}
{{--                            x-bind:class="{ 'bg-opacity-10': state === '{{ $value }}' }"--}}
{{--                        ></div>--}}

{{--                        <div--}}
{{--                            class="absolute top-2 right-2 w-6 h-6 rounded-full bg-white border-2 flex items-center justify-center transition-all duration-300"--}}
{{--                            x-bind:class="{--}}
{{--                                'border-primary-500 bg-primary-500': state === '{{ $value }}',--}}
{{--                                'border-gray-300': state !== '{{ $value }}'--}}
{{--                            }"--}}
{{--                        >--}}
{{--                            <svg x-show="state === '{{ $value }}'" class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">--}}
{{--                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>--}}
{{--                            </svg>--}}
{{--                        </div>--}}
{{--                    </div>--}}

{{--                    <input--}}
{{--                        type="radio"--}}
{{--                        name="{{ $getId() }}"--}}
{{--                        id="{{ $getId() }}-{{ $value }}"--}}
{{--                        value="{{ $value }}"--}}
{{--                        wire:model="{{ $getStatePath() }}"--}}
{{--                        class="sr-only"--}}
{{--                    />--}}
{{--                </div>--}}
{{--            @endforeach--}}
{{--        </div>--}}
{{--    </div>--}}
</x-dynamic-component>

<style>
    .filament-forms-image-radio-component .image-radio-option {
        position: relative;
        transition: all 0.3s ease;
        min-height: 100px; /* Ensure minimum height */
    }

    .filament-forms-image-radio-component img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center;
    }

    /* Debugging styles (can be removed in production) */
    .filament-forms-image-radio-component img:not([src]) {
        background-color: rgba(255, 0, 0, 0.1);
        border: 2px dashed red;
    }

    /* Pulse animation for newly selected items */
    @keyframes pulse {
        0% {
            box-shadow: 0 0 0 0 rgba(var(--primary-500), 0.7);
        }
        70% {
            box-shadow: 0 0 0 10px rgba(var(--primary-500), 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(var(--primary-500), 0);
        }
    }

    .filament-forms-image-radio-component .image-radio-option[x-bind\:class*="state === '"] {
        animation: pulse 1.5s;
    }
</style>
